<head>
  <title>Glossaries</title>
</head>

<body>
</body>

<!-- this is the main template used by iron:router to build the page -->
<template name="ApplicationLayout">
  {{> yield "header"}}
  
  <div class="container">
  {{> yield "main"}}
  </div>
</template>

<!-- top level template for the nav bar -->
<template name="navbar">
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">
        Glossaries
      </a>
    </div>
    {{#if currentUser}}
    <div class="nav navbar-nav">
      <a class="navbar-brand" href="/my_glossaries">
        My glossaries
      </a>
    </div>
    {{/if}}
    <div class="nav navbar-nav">
      <a class="navbar-brand" href="/search">
        Search
      </a>
    </div>
    <div class="nav navbar-nav">
    {{> loginButtons}}
    </div>
  </div>
</nav>
</template>

<!-- Top level template for the lobby page -->
<template name="glossaries">
  <div class="row">
    {{#each public_glossaries}}
      {{> glossary_concise_view}}
      <!-- {{> quickRemoveButton collection="Glossaries" _id=this._id beforeRemove=beforeRemove}} -->
    {{/each}}
  </div>
</template>

<!-- glossary consisi view (title, language combination) -->
<template name="glossary_concise_view">
  <h3>{{this.title}}</h3>
  <p>
    {{this.source_language}} - {{this.target_language}}
    Subject: {{this.subject}} 
    <a href="/view/{{this._id}}" class="btn btn-primary" role="button">View</a>
  </p>
</template>

<!-- full glossary view -->
<template name="glossary_full_view">
  <h3>{{this.title}}</h3>
  <p>{{this.source_language}} - {{this.target_language}}</p>
  <p>Subject: {{this.subject}}</p>
  <h4>Terms:</h4>
  <ol>
  {{#each this.terms}}
    <li>{{this.source_term}} - {{this.target_term}}</li>
  {{/each}}
</ol>
<a href="/update/{{this._id}}" class="btn btn-primary" role="button">Update</a>
{{> quickRemoveButton collection="Glossaries" _id=this._id beforeRemove=beforeRemove}}
</template>

<template name="myGlossaries">
  <div class="row">
    {{#each my_glossaries}}
      {{> glossary_concise_view}}
      <!-- {{> quickRemoveButton collection="Glossaries" _id=this._id}} -->
    {{/each}}
  </div>
</template>

<template name="insertGlossaryForm">
  {{> quickForm collection="Glossaries" id="insertGlossaryForm" type="insert"}}
</template>

<!-- <template name="insertGlossaryForm">
  {{#autoForm collection="Glossaries" id="insertGlossaryForm" type="insert"}}
  <fieldset>
    <legend>Add a Book</legend>
    {{> afQuickField name='title'}}
    {{> afQuickField name='source_language'}}
    {{> afQuickField name='target_language'}}
    {{> afQuickField name='subject'}}
    {{> afQuickField name='public'}}
    {{#afEachArrayItem name="terms"}}

        <button type="button" class="btn btn-primary autoform-remove-item"><span class="glyphicon glyphicon-minus"></span></button>
        {{> afFieldInput name=this.current.source_term}}  
        {{> afFieldInput name=this.current.target_term}}
        {{> afFieldInput name=this.current.comment}}

    {{/afEachArrayItem}}
    {{> afQuickField name='terms.source_term'}}
    {{> afQuickField name='terms.target_term'}}
    {{> afQuickField name='comment'}}
    {{> afQuickField name='terms' rows=6}}
    {{> afQuickField name='copies'}}
    {{> afQuickField name='lastCheckedOut'}}
    <div class="form-group{{#if afFieldIsInvalid name='cost'}} has-error{{/if}}">
      <div class="input-group">
        <span class="input-group-addon">$</span>
        {{> afFieldInput name='cost'}}
        <span class="input-group-addon">/each</span>
      </div>
      {{#if afFieldIsInvalid name='cost'}}
      <span class="help-block">{{afFieldMessage name='cost'}}</span>
      {{/if}}
    </div>
  </fieldset>
  <button type="submit" class="btn btn-primary">Insert</button>
  {{/autoForm}}
</template> -->

<template name="updateGlossaryForm">
  <!-- {{> navbar}} -->
  {{> quickForm collection="Glossaries" doc=this id="updateGlossaryForm" type="update"}}
</template>

<!-- <template name="updateGlossaryForm">
  {{#autoForm collection="Glossaries" doc=this id="updateGlossaryForm" type="update"}}
  <fieldset>
    <legend>Glossary update</legend>
    {{> afQuickField name='title'}}
    {{> afQuickField name='source_language'}}
    {{> afQuickField name='target_language'}}
    {{> afQuickField name='subject'}}
    {{> afQuickField name='public'}}
    {{#afEachArrayItem name="terms"}}
      <div class="autoform-array-item">
        <button type="button" class="autoform-remove-item">Remove</button>
        {{> afFieldInput name=this.current.source_term}}  
        {{> afFieldInput name=this.current.target_term}}
        {{> afFieldInput name=this.current.comment}}
      </div>
    {{/afEachArrayItem}}
  </fieldset>
  <button type="submit" class="btn btn-primary">Insert</button>
  {{/autoForm}}
</template> -->

<template name="searchBox">
    {{> EasySearch.Input index=glossariesIndex }}
    <!-- <div class="autosuggest-component">
      {{> EasySearch.Autosuggest index=glossariesIndex}}
    </div> -->
    <ul>
        {{#EasySearch.Each index=glossariesIndex }}
            <li><a href="/view/{{this._id}}">{{title}}</a></li>
        {{/EasySearch.Each}}
    </ul>

    {{> EasySearch.LoadMore index=glossariesIndex}}

    {{#EasySearch.IfNoResults index=glossariesIndex}}
      <div class="no-results">No results found!</div>
    {{/EasySearch.IfNoResults}}
</template>




